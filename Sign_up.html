<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="Sign_up.css">
</head>
<body>
    <div class="sen1">
        <h1>Sign Up</h1>
    </div>
    <div class="form">
        <form action="Clubs_list.html" name="myform" onsubmit="return chkpassword();">
            <p>Name:</p>
            <input type="text" name="fname" id="fname" placeholder="Name" required><span id="checking_name" class="formerror"></span>
            <p>USN:</p>
            <input type="text" name="usn" id="usn" placeholder="USN" oninput="clearAllErrors();" required><span id="checking_usn" class="formerror"></span>
            <p>Email:</p>
            <input type="email" name="email" id="email" placeholder="Email" oninput="clearAllErrors();" required><span id="checking_email" class="formerror"></span>
            <p>Phone Number:</p>
            <select name="country_code" id="country_code">
                <option selected>+91</option>
                <option>+92</option>
                <option>+1</option>
                <option>+93</option>
            </select>
            <input type="text" name="ph" id="ph" placeholder="Phone number" oninput="clearAllErrors();" required><span id="phone" class="formerror"></span>
            <br><br>
            <p>Password:</p>
            <input type="password" name="password" id="password" placeholder="Password" oninput="clearAllErrors();" required><span id="pass_length" class="formerror"></span>
            <p>Retype Password:</p>
            <input type="password" name="repassword" id="repassword" placeholder="Retype password" oninput="clearAllErrors();" required><span id="checking_password" class="formerror"></span>
            <br><br>
            <input type="submit">
        </form>
    </div>
    <script type = "text/javascript">
        function clearAllErrors()
        {
            let errorFields = ['checking_name', 'checking_usn', 'checking_email', 'phone', 'pass_length', 'checking_password'];

            for (field in errorFields) 
            {
                document.getElementById(errorFields[field]).innerHTML = "";
            }
        }
        function chkpassword()
        {
            let value=document.getElementById("email").value;
            let val=document.getElementById("usn").value;
            let pattern1=/1BM2[0-9]{1}[A-Z]{2}[0-9]{3}/i;
            let v=document.getElementById("usn").value.search(pattern1);
            let pattern2=/[a-z]+[.][a-z]{2}[0-9]{2}[@]{1}[b]{1}[m]{1}[s]{1}[c]{1}[e]{1}[.]{1}[a]{1}[c]{1}[.]{1}[i]{1}[n]{1}/;
            let s=document.getElementById("email").value.search(pattern2);
            let i,j,k,count=0;
            if(v==-1 || val.length!=10)
            {
                document.getElementById("checking_usn").innerHTML="*Enter valid usn";
                return false;
            }
            else if(s==-1)
            {
                // for(i=0;i<value.length;i++)
                // {
                //     if (value[i]=='@') {
                //         k=i;
                //         break;
                //     }
                // }
                // for(j=k;j<=value.length;j++)
                // {
                //     count++;
                // }
                // if (count!=12) {
                //     document.getElementById("checking_email").innerHTML="*Enter valid bmsce email";
                //     return false;
                // }

                    document.getElementById("checking_email").innerHTML="*Enter valid bmsce email";
                return false;
            }
            else if (document.getElementById("ph").value.length!=10) {
                document.getElementById("phone").innerHTML="*Phone should contain  10 digits";
                return false;
            }
            else if(document.getElementById("password").value.length<6)
            {
                document.getElementById("pass_length").innerHTML="*Password should be atleast 6 characters";
                return false;
            }
            else if (document.getElementById("password").value!=document.getElementById("repassword").value) {
                    document.getElementById("checking_password").innerHTML="*The two passwords that you entered are wrong. Re-enter";
                    return false;
            }
            else
            return true;
        }
        // sessionStorage.setItem("name", document.getElementById("fname").value);
        // sessionStorage.setItem("email", document.getElementById("email").value);
        // sessionStorage.setItem("usn",document.getElementById("usn").value);
        // sessionStorage.setItem("phone", document.getElementById("ph").value);
    </script>
</body>
</html>